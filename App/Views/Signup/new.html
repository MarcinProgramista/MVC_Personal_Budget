{% extends "base.html" %} {% block title %}Sign up{% endblock %} {% block footer
%}
<script src="/js/hideShowPassword.min.js"></script>

<script>
  // Custom validator for password
  $.validator.addMethod(
    "validPassword",
    function (value, element) {
      if (value !== "") {
        if (!/[a-z]/i.test(value)) return false;
        if (!/\d/.test(value)) return false;
      }
      return true;
    },
    '<div style="margin-left: 60px;  padding-bottom: 10px;" class="text-danger">Password must contain at least one letter and one number.</div>'
  );

  $(document).ready(function () {
    // Form validation
    $("#formSignup").validate({
      rules: {
        name: "required",
        email: {
          required: true,
          email: true,
          remote: {
            url: "/account/validate-email",
            type: "get",
            data: {
              email: function () {
                return $("#inputEmail").val();
              },
            },
          },
        },

        password: {
          required: true,
          minlength: 6,
          validPassword: true,
        },
      },
      messages: {
        email: {
          required:
            '<div style="margin-left: 60px;  padding-bottom: 10px;" class="text-danger">Email is required</div>',
          email:
            '<div style="margin-left: 60px;  padding-bottom: 10px;" class="text-danger">Please enter a valid email.</div>',
          remote:
            '<div style="margin-left: 60px;  padding-bottom: 10px;" class="text-danger">Email is already taken</div>',
        },
        name: {
          required:
            '<div style="margin-left: 60px;  padding-bottom: 10px;" class="text-danger">Name is required</div>',
        },
        password: {
          required:
            '<div style="margin-left: 60px;  padding-bottom: 10px;" class="text-danger">Password is required</div>',
          minlength:
            '<div style="margin-left: 30px;  padding-bottom: 10px;" class="text-danger">Password must have at least 6 characters</div>',
        },
      },
      errorPlacement: function (error, element) {
        if (element.parent().hasClass("input-group")) {
          error.insertAfter(element.parent()); // POD CAŁYM input-group
        } else {
          error.insertAfter(element); // standardowo pod inputem
        }
      },
    });

    // Show/hide password plugin
    $("#inputPassword").hideShowPassword({
      show: false,
      innerToggle: true,
      toggle: {
        className:
          "btn btn-sm btn-dark hide-password-btn hideShowPassword-toggle",
        content: '<i class="fa fa-eye"></i>',
        attr: {
          "aria-label": "Show password",
          title: "Show password",
        },
      },
      states: {
        shown: {
          toggle: {
            content: '<i class="fa fa-eye-slash"></i>',
            attr: { title: "Hide password" },
          },
        },
        hidden: {
          toggle: {
            content: '<i class="fa fa-eye"></i>',
            attr: { title: "Show password" },
          },
        },
      },
    });
  });
</script>

<style>
  .hideShowPassword-wrapper {
    position: relative !important;
    display: inline-block !important;
    width: 100% !important;
    height: 70px;
  }

  .hideShowPassword-toggle {
    position: absolute !important;
    top: 50% !important;
    transform: translateY(-50%) !important;
    right: 12px;
    z-index: 10;
  }

  .page-wrapper {
    min-height: 100vh;
    background: url("/images/achievement-3404945_1920.jpg") center center
      no-repeat;
    background-size: cover;
    position: relative;
    padding: 40px 20px;

    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 30px; /* odstęp między cytatem a formularzem */
  }
  .info-card {
    background: rgba(28, 28, 28, 0.85);
    border: 1px solid #ffc107;
    border-radius: 16px;
    padding: 20px 30px;
    color: #ffc107;
    max-width: 700px;
    text-align: center;
    z-index: 2;
  }
  /* Formularz */
  #leftColumn {
    background: rgba(28, 28, 28, 0.85);
    border: 1px solid #ffc107;
    border-radius: 16px;
    padding: 25px;
    width: 100%;
    max-width: 500px;
    z-index: 2;
  }
  #leftColumn:hover {
    box-shadow: 0 0 25px rgba(255, 193, 7, 0.4);
    transform: scale(1.02);
    opacity: 1;
  }
  .form-control::placeholder {
    color: #ffc107 !important;
    opacity: 1;
  }
  @keyframes shake {
    0%,
    100% {
      transform: translateX(0);
    }

    25% {
      transform: translateX(-5px);
    }

    75% {
      transform: translateX(5px);
    }
  }

  .shake {
    animation: shake 0.4s ease;
  }
  /* --- DODAJ TEN KOD NA SAMYM KOŃCU --- */
  input:-webkit-autofill,
  input:-webkit-autofill:hover,
  input:-webkit-autofill:focus,
  input:-webkit-autofill:active {
    -webkit-box-shadow: 0 0 0 1000px #1c1c1c inset !important;
    -webkit-text-fill-color: #f8f9fa !important;
    caret-color: #f8f9fa !important;
    border: 1px solid #ffc107 !important;
  }
</style>
{% endblock %} {% block body %}
<div class="page-wrapper">
  <div class="info-card">
    “A budget is telling your money where to go instead of wondering where it
    went.”<br />
    — <span class="fw-bold">John C. Maxwell</span>
  </div>
  <!-- FORMULARZ NAD TAPETĄ -->
  <div id="leftColumn" class="shake">
    <h1 class="mb-4 text-center"><i class="fas fa-user p-2"></i>Sing up</h1>

    <div class="container pb-1 text-danger">
      {% if user.errors is not empty %}
      <p>Errors:</p>
      <ul>
        {% for error in user.errors %}
        <li>{{ error }}</li>
        {% endfor %}
      </ul>
      {% endif %}
    </div>
    <form
      method="post"
      action="/signup/create"
      class="text-warning"
      id="formSignup"
      novalidate
    >
      <div class="input-group mb-2 flex-nowrap">
        <span class="input-group-text bg-dark text-light border-warning">
          <i class="fas fa-user"></i>
        </span>
        <input
          type="text"
          class="form-control bg-dark text-light border-warning"
          id="inputName"
          name="name"
          value="{{ user.name }}"
          placeholder="Name"
          required
        />
      </div>
      <div class="input-group mb-2 flex-nowrap">
        <span class="input-group-text bg-dark text-light border-warning">
          <i class="far fa-envelope"></i>
        </span>
        <input
          type="email"
          class="form-control bg-dark text-light border-warning"
          id="inputEmail"
          name="email"
          value="{{ user.email }}"
          placeholder="E-mail"
          required
        />
      </div>
      <div class="input-group mb-2 flex-nowrap align-items-center">
    <span  style=" margin-bottom: 30px; padding-bottom: 15px;" class="input-group-text bg-dark text-light border-warning">
        <i class="fa-solid fa-key"></i>
    </span>
    <input
        type="password"
        autocomplete="new-password"
        class="form-control bg-dark text-warning border-warning"
        id="inputPassword"
        name="password"
        placeholder="Password"
        required
    />
</div>
<div class="text-center">
          <button type="submit" class="btn btn-success btn-block m-3 w-50 p-2">
            Sign up
          </button>
        </div>
    </form>
  </div>
</div>
<div class="container my-5">
  <div
    class="row justify-content-center align-items-center g-4"
    style="gap: 200px"
  >
      <form
        method="post"
        action="/signup/create"
        class="text-warning"
        novalidate
      >
       

        
      </form>
    </div>
    <!-- PRAWA KOLUMNA Z FORMULARZEM -->
    <div
      class="col-md-4 text-center border border-warning rounded shadow-lg p-4"
    >
      <p class="fst-italic text-light mb-4">
        “Don’t tell me where your priorities are. Show me where you spend your
        money and I’ll tell you what they are.” <br />
        — <span class="fw-bold">James W. Frick</span>
      </p>
      <img
        src="/images/achievement-3404945_1920.jpg"
        alt="Motywacyjny obraz"
        class="img-fluid border border-warning rounded shadow-lg form-image"
      />
    </div>
  </div>
</div>
{% endblock %}
